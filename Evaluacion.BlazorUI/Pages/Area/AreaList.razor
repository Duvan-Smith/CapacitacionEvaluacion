@page "/arealist"

<h1>Lista de areas</h1>

@if (areaDtos == null)
{
    <div class="loadingio-spinner-eclipse-et0d2h7rdkc">
        <div class="ldio-1twzmihf3jb">
            <div></div>
        </div>
    </div>
    <style type="text/css">
        @@-webkit-keyframes
                ldio-1twzmihf3jb {
                    0%

                {
                    transform: rotate(0deg)
                }

                50% {
                    transform: rotate(180deg)
                }

                100% {
                    transform: rotate(360deg)
                }

                }

                .ldio-1twzmihf3jb div {
                    position: absolute;
                    animation: ldio-1twzmihf3jb 1.28s linear infinite;
                    width: 76px;
                    height: 76px;
                    top: 12px;
                    left: 12px;
                    border-radius: 50%;
                    box-shadow: 0 2px 0 0 #e15b64;
                    transform-origin: 38px 39px;
                }

                .loadingio-spinner-eclipse-et0d2h7rdkc {
                    width: 58px;
                    height: 58px;
                    display: inline-block;
                    overflow: hidden;
                    background: #ffffff;
                }

                .ldio-1twzmihf3jb {
                    width: 100%;
                    height: 100%;
                    position: relative;
                    transform: translateZ(0) scale(0.58);
                    backface-visibility: hidden;
                    transform-origin: 0 0; /* see note above */
                }

                    .ldio-1twzmihf3jb div {
                        box-sizing: content-box;
                    }
                /* generated by https://loading.io/ */
    </style>
}
else
{
    <MatTable Items="@areaDtos" class="mat-elevation-z5" AllowSelection="true" SelectionChanged="SelectionChangedEvent">
        <MatTableHeader>
            <th>Date</th>
            <th>NombreArea</th>
        </MatTableHeader>
        <MatTableRow>
            <td>@context.Id</td>
            <td>@context.NombreArea</td>
        </MatTableRow>
    </MatTable>
}

<p>@_currentSelectedTask</p>

@code {
    private string Url = "/FachadaGenericas/GetAllArea";
    private IEnumerable<AreaDto> areaDtos;
    private string _currentSelectedTask;

    protected override async Task OnInitializedAsync() =>
    areaDtos = await Http.GetFromJsonAsync<IEnumerable<AreaDto>>(Url);
    public void SelectionChangedEvent(object row)
    {
        if (row == null)
        {
            _currentSelectedTask = "";
        }
        else
        {
            _currentSelectedTask = string.Format("areaDtos Nr. {0} has been selected", ((AreaDto)row).Id);
        }
        this.StateHasChanged();
    }
}
